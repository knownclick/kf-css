@use "sass:map";

@mixin generate-classes($config, $prefix: "") {
  $utility-values: map.get($config, "utility-values");
  $compound-utilities: map.get($config, "compound-utilities");
  $grid-columns: map.get($config, "grid-columns");
  $grid-auto-sizes: map.get($config, "grid-auto-sizes");
  $order-count: map.get($config, "order-count");

  // Generates: .block, .flex, .text-center, .z-10, .overflow-hidden...
  @if $utility-values {
    @each $property, $values in $utility-values {
      @each $class, $value in $values {
        .#{$prefix}#{$class} {
          #{$property}: #{$value};
        }
      }
    }
  }

  // Generates: .flex-row, .flex-col, .row, .col
  @if $compound-utilities {
    @each $class, $props in $compound-utilities {
      .#{$prefix}#{$class} {
        @each $prop, $val in $props {
          #{$prop}: #{$val};
        }
      }
    }
  }

  // Generates: .columns-1 to .columns-8
  @for $i from 1 through $grid-columns {
    .#{$prefix}columns-#{$i} {
      display: grid;
      --columns: #{$i};
      grid-template-columns: repeat(var(--columns), minmax(0, 1fr));
    }
  }

  // Generates: .columns-min-* (e.g., .columns-min-20)
  @each $size in $grid-auto-sizes {
    .#{$prefix}columns-min-#{$size} {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(#{$size}rem, 1fr));
    }
  }

  // Generates: .col-span-*, .col-start-*, .row-span-*, .row-start-*
  @for $i from 1 through $grid-columns {
    .#{$prefix}col-span-#{$i} {
      grid-column: auto / span $i;
    }
    .#{$prefix}col-start-#{$i} {
      grid-column-start: $i;
    }

    .#{$prefix}row-span-#{$i} {
      grid-row: auto / span $i;
    }
    .#{$prefix}row-start-#{$i} {
      grid-row-start: $i;
    }
  }
  .#{$prefix}col-span-full {
    grid-column: 1 / -1;
  }

  // Generates: .width-10 to .width-100
  @for $i from 1 through 9 {
    .#{$prefix}width-#{$i}0 {
      width: $i * 10%;
    }
  }
  .#{$prefix}width-33 {
    width: 33.3333%;
  }
  .#{$prefix}width-66 {
    width: 66.6666%;
  }
  .#{$prefix}width-100 {
    width: 100%;
  }
  .#{$prefix}height-100 {
    height: 100%;
  }

  // Generates: .order-* (.order-1, .order-first, .order-last)
  @if $order-count > 0 {
    @for $i from 1 through $order-count {
      .#{$prefix}order-#{$i} {
        order: $i;
      }
    }
  }
  .#{$prefix}order-first {
    order: -9999;
  }
  .#{$prefix}order-last {
    order: 9999;
  }
  .#{$prefix}order-none {
    order: 0;
  }

  // Generates: .items-*, .content-*, .self-* (Flex/Grid Alignment)
  // Items (Parent)
  .#{$prefix}items-start {
    align-items: start;
    justify-items: start;
  }
  .#{$prefix}items-center {
    align-items: center;
    justify-items: center;
  }
  .#{$prefix}items-end {
    align-items: end;
    justify-items: end;
  }
  .#{$prefix}items-stretch {
    align-items: stretch;
    justify-items: stretch;
  }

  // Content (Parent)
  .#{$prefix}content-start {
    align-content: start;
    justify-content: start;
  }
  .#{$prefix}content-center {
    align-content: center;
    justify-content: center;
  }
  .#{$prefix}content-end {
    align-content: end;
    justify-content: end;
  }
  .#{$prefix}content-between {
    align-content: space-between;
    justify-content: space-between;
  }
  .#{$prefix}content-around {
    align-content: space-around;
    justify-content: space-around;
  }

  // Self (Child) - Handles Grid & Flex + Margins
  .#{$prefix}self-left {
    align-self: start;
    place-self: start;
    margin-inline-end: auto;
  }
  .#{$prefix}self-center {
    align-self: center;
    place-self: center;
    margin-inline: auto;
  }
  .#{$prefix}self-right {
    align-self: end;
    place-self: end;
    margin-inline-start: auto;
  }
  .#{$prefix}self-top {
    align-self: start;
    place-self: start;
    margin-bottom: auto;
  }
  .#{$prefix}self-middle {
    align-self: center;
    place-self: center;
    margin-block: auto;
  }
  .#{$prefix}self-bottom {
    align-self: end;
    place-self: end;
    margin-top: auto;
  }
  .#{$prefix}self-stretch {
    align-self: stretch;
    place-self: stretch;
  }
}
